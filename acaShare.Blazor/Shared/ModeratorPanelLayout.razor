@inherits LayoutComponentBase
@layout MainLayout
@inject IJSRuntime JsRuntime

<div class="col s12 m5 l3 home-part moderator-actions-container">
    <div class="data-container">
        <nav class="colornav">
            <div class="nav-wrapper path-header-wrapper">
                <div class="col s12 tree-path">
                    Akcje
                </div>
            </div>
        </nav>

        <div class="home-content">
            <ul id="moderator-actions" class="moderator-actions">

                <li class="moderator-actions-item moderator-actions-item-active">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/MaterialsToApprove"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["MaterialsToApprove"]))">
                        @_pages["MaterialsToApprove"]
                    </NavLink>
                </li>
                <li class="moderator-actions-item ">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/EditSuggestions"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["EditSuggestions"]))">
                        @_pages["EditSuggestions"]
                    </NavLink>
                </li>
                <li class="moderator-actions-item ">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/DeleteSuggestions"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["DeleteSuggestions"]))">
                        @_pages["DeleteSuggestions"]
                    </NavLink>
                </li>
                <li class="moderator-actions-item ">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/Universities"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["Universities"]))">
                        @_pages["Universities"]
                    </NavLink>
                </li>
                <li class="moderator-actions-item ">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/ModeratorManagement"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["ModeratorManagement"]))">
                        @_pages["ModeratorManagement"]
                    </NavLink>
                </li>
                <li class="moderator-actions-item ">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/Statistics"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["Statistics"]))">
                        @_pages["Statistics"]
                    </NavLink>
                </li>
                <li class="moderator-actions-item ">
                    <NavLink class="moderator-actions-item-link" href="/Moderator/ModeratorPanel/Regulations"
                             @onclick="@(() => ChangeBreadcrumbAndTitle(_pages["Regulations"]))">
                        @_pages["Regulations"]
                    </NavLink>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="col s12 m7 l9 home-part">
    <div class="data-container">
        <nav class="colornav">
            <div class="nav-wrapper path-header-wrapper">
                <div class="col s12 tree-path">
                    <a class="breadcrumb">
                        @_currentPageName
                    </a>
                </div>
            </div>
        </nav>

        <div class="home-content">
            <CascadingValue Value="ChangeBreadcrumbAndTitle" TValue="Action<string>">
                @Body
            </CascadingValue>
        </div>
    </div>
</div>

@code {
    private static readonly IDictionary<string, string> _pages = new Dictionary<string, string>
{
        { "MaterialsToApprove", "Materiały oczekujące na zatwierdzenie" },
        { "EditSuggestions", "Sugestie edycji" },
        { "DeleteSuggestions", "Sugestie usunięcia" },
        { "Universities", "Zarządzaj strukturą uczelni" },
        { "ModeratorManagement", "Zarządzaj moderatorami" },
        { "Statistics", "Statystyki" },
        { "Regulations", "Regulamin" },
    };

    private static string _currentPageName = _pages["MaterialsToApprove"];

    public void ChangeBreadcrumbAndTitle(string pageName)
    {
        _currentPageName = pageName;
        JsRuntime.InvokeVoidAsync(JsFunctions.SetDocumentTitle, pageName);
    }
}
